<!DOCTYPE HTML>
<html lang="en" class="light" dir="ltr">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Iceberg Rust</title>
        <meta name="robots" content="noindex">


        <!-- Custom HTML head -->
        
        <meta name="description" content="">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff">

        <link rel="icon" href="favicon.svg">
        <link rel="shortcut icon" href="favicon.png">
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        <link rel="stylesheet" href="css/print.css" media="print">

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        <link rel="stylesheet" href="fonts/fonts.css">

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->

    </head>
    <body class="sidebar-visible no-js">
    <div id="body-container">
        <!-- Provide site root to javascript -->
        <script>
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script>
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script>
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('light')
            html.classList.add(theme);
            var body = document.querySelector('body');
            body.classList.remove('no-js')
            body.classList.add('js');
        </script>

        <input type="checkbox" id="sidebar-toggle-anchor" class="hidden">

        <!-- Hide / unhide sidebar before it is displayed -->
        <script>
            var body = document.querySelector('body');
            var sidebar = null;
            var sidebar_toggle = document.getElementById("sidebar-toggle-anchor");
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            } else {
                sidebar = 'hidden';
            }
            sidebar_toggle.checked = sidebar === 'visible';
            body.classList.remove('sidebar-visible');
            body.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded "><a href="introduction.html">Introduction</a></li><li class="chapter-item expanded affix "><li class="part-title">User Guide</li><li class="chapter-item expanded "><a href="install.html">Install</a></li><li class="chapter-item expanded "><a href="download.html">Download</a></li><li class="chapter-item expanded "><a href="api.html">API</a></li><li class="chapter-item expanded affix "><li class="part-title">Developer Guide</li><li class="chapter-item expanded "><a href="CONTRIBUTING.html">Contributing</a></li><li class="chapter-item expanded "><a href="release.html">Release</a></li><li class="chapter-item expanded affix "><li class="part-title">Reference</li><li class="chapter-item expanded "><a href="reference/podman.html">Using Podman instead of Docker</a></li><li class="chapter-item expanded "><a href="reference/orbstack.html">OrbStack as a docker alternative</a></li><li class="chapter-item expanded "><a href="reference/setup_gpg.html">Setup GPG key</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle">
                <div class="sidebar-resize-indicator"></div>
            </div>
        </nav>

        <!-- Track and set sidebar scroll position -->
        <script>
            var sidebarScrollbox = document.querySelector('#sidebar .sidebar-scrollbox');
            sidebarScrollbox.addEventListener('click', function(e) {
                if (e.target.tagName === 'A') {
                    sessionStorage.setItem('sidebar-scroll', sidebarScrollbox.scrollTop);
                }
            }, { passive: true });
            var sidebarScrollTop = sessionStorage.getItem('sidebar-scroll');
            sessionStorage.removeItem('sidebar-scroll');
            if (sidebarScrollTop) {
                // preserve sidebar scroll position when navigating via links within sidebar
                sidebarScrollbox.scrollTop = sidebarScrollTop;
            } else {
                // scroll sidebar to current active section when navigating via "next/previous chapter" buttons
                var activeSection = document.querySelector('#sidebar .active');
                if (activeSection) {
                    activeSection.scrollIntoView({ block: 'center' });
                }
            }
        </script>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky">
                    <div class="left-buttons">
                        <label id="sidebar-toggle" class="icon-button" for="sidebar-toggle-anchor" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </label>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                    </div>

                    <h1 class="menu-title">Iceberg Rust</h1>

                    <div class="right-buttons">
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        <a href="https://github.com/apache/iceberg-rust" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>

                    </div>
                </div>

                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script>
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="iceberg-rust"><a class="header" href="#iceberg-rust">Iceberg Rust</a></h1>
<p><code>iceberg-rust</code> is a Rust implementation for managing Apache Iceberg tables.</p>
<h2 id="what-is-apache-iceberg"><a class="header" href="#what-is-apache-iceberg">What is Apache Iceberg?</a></h2>
<p><a href="https://iceberg.apache.org">Apache Iceberg</a> is a modern, high-performance open table format
for huge analytic datasets that brings SQL-like tables to processing engines including Spark, Trino, PrestoDB, Flink, Hive and Impala. </p>
<p>Iceberg provides a metadata layer that sits on top of formats like Parquet 
and ORC, ensuring data is organized, accessible, and safe to work with at scale. It introduces features long
expected in databases such as transactional consistency, schema evolution, and time travel into environments 
where files are stored directly on systems like Amazon S3.</p>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="install"><a class="header" href="#install">Install</a></h1>
<div class="warning">
Cargo 1.75.0 or later is required to build.
</div>
<p>Add <code>iceberg</code> and <code>iceberg-catalog-rest</code> into <code>Cargo.toml</code> dependencies:</p>
<pre><code class="language-toml">iceberg = &quot;0.6.0&quot;
iceberg-catalog-rest = &quot;0.6.0&quot;
</code></pre>
<p>using <code>cargo add</code>:</p>
<pre><code class="language-bash">$ cargo add iceberg iceberg-catalog-rest
</code></pre>
<p>iceberg is under active development, you may want to use the git version instead:</p>
<pre><code class="language-toml">iceberg = { git = &quot;https://github.com/apache/iceberg-rust&quot;, rev = &quot;commit-hash&quot; }
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="apache-iceberg-rust-downloads"><a class="header" href="#apache-iceberg-rust-downloads">Apache Icebergâ„¢ Rust Downloads</a></h1>
<p>The official Apache Iceberg-Rust releases are provided as source artifacts.</p>
<h2 id="releases"><a class="header" href="#releases">Releases</a></h2>
<p>The latest source release is <a href="https://www.apache.org/dyn/closer.lua/iceberg/apache-iceberg-rust-0.7.0/apache-iceberg-rust-0.7.0-src.tar.gz">0.7.0</a> (<a href="https://downloads.apache.org/iceberg/apache-iceberg-rust-0.7.0/apache-iceberg-rust-0.7.0-src.tar.gz.asc">asc</a>,
<a href="https://downloads.apache.org/iceberg/apache-iceberg-rust-0.7.0/apache-iceberg-rust-0.7.0-src.tar.gz.sha512">sha512</a>).</p>
<p>For older releases, please check the <a href="https://archive.apache.org/dist/iceberg/">archive</a>.</p>
<h2 id="notes"><a class="header" href="#notes">Notes</a></h2>
<ul>
<li>When downloading a release, please verify the OpenPGP compatible signature (or failing that, check the SHA-512); these should be fetched from the main Apache site.</li>
<li>The KEYS file contains the public keys used for signing release. It is recommended that (when possible) a web of trust is used to confirm the identity of these keys.</li>
<li>Please download the <a href="https://downloads.apache.org/iceberg/KEYS">KEYS</a> as well as the .asc signature files.</li>
</ul>
<h3 id="to-verify-the-signature-of-the-release-artifact"><a class="header" href="#to-verify-the-signature-of-the-release-artifact">To verify the signature of the release artifact</a></h3>
<p>You will need to download both the release artifact and the .asc signature file for that artifact. Then verify the signature by:</p>
<ul>
<li>
<p>Download the KEYS file and the .asc signature files for the relevant release artifacts.</p>
</li>
<li>
<p>Import the KEYS file to your GPG keyring:</p>
<pre><code class="language-shell">gpg --import KEYS
</code></pre>
</li>
<li>
<p>Verify the signature of the release artifact using the following command:</p>
<pre><code class="language-shell">gpg --verify &lt;artifact&gt;.asc &lt;artifact&gt;
</code></pre>
</li>
</ul>
<h3 id="to-verify-the-checksum-of-the-release-artifact"><a class="header" href="#to-verify-the-checksum-of-the-release-artifact">To verify the checksum of the release artifact</a></h3>
<p>You will need to download both the release artifact and the .sha512 checksum file for that artifact. Then verify the checksum by:</p>
<pre><code class="language-shell">shasum -a 512 -c &lt;artifact&gt;.sha512
</code></pre>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="catalog"><a class="header" href="#catalog">Catalog</a></h1>
<p><code>Catalog</code> is the entry point for accessing iceberg tables. You can use a catalog to:</p>
<ul>
<li>Create and list namespaces.</li>
<li>Create, load, and drop tables</li>
</ul>
<p>There is support for the following catalogs:</p>
<div class="table-wrapper"><table><thead><tr><th>Catalog</th><th>Description</th></tr></thead><tbody>
<tr><td><code>Rest</code></td><td>the Iceberg REST catalog</td></tr>
<tr><td><code>Glue</code></td><td>the AWS Glue Data Catalog</td></tr>
<tr><td><code>Memory</code></td><td>a memory-based Catalog</td></tr>
<tr><td><code>HMS</code></td><td>Apache Iceberg HiveMetaStore catalog</td></tr>
<tr><td><code>S3Tables</code></td><td>AWS S3 Tables</td></tr>
<tr><td><code>SQL</code></td><td>SQL-based catalog</td></tr>
</tbody></table>
</div>
<p>Not all catalog implementations are complete.</p>
<h2 id="restcatalog"><a class="header" href="#restcatalog"><code>RestCatalog</code></a></h2>
<p>Here is an example of how to create a <code>RestCatalog</code>:</p>
<pre><code class="language-rust no_run noplayground"><span class="boring">// Licensed to the Apache Software Foundation (ASF) under one
</span><span class="boring">// or more contributor license agreements.  See the NOTICE file
</span><span class="boring">// distributed with this work for additional information
</span><span class="boring">// regarding copyright ownership.  The ASF licenses this file
</span><span class="boring">// to you under the Apache License, Version 2.0 (the
</span><span class="boring">// &quot;License&quot;); you may not use this file except in compliance
</span><span class="boring">// with the License.  You may obtain a copy of the License at
</span><span class="boring">//
</span><span class="boring">//   http://www.apache.org/licenses/LICENSE-2.0
</span><span class="boring">//
</span><span class="boring">// Unless required by applicable law or agreed to in writing,
</span><span class="boring">// software distributed under the License is distributed on an
</span><span class="boring">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
</span><span class="boring">// KIND, either express or implied.  See the License for the
</span><span class="boring">// specific language governing permissions and limitations
</span><span class="boring">// under the License.
</span><span class="boring">
</span><span class="boring">use std::collections::HashMap;
</span><span class="boring">
</span><span class="boring">use iceberg::{Catalog, CatalogBuilder, NamespaceIdent};
</span><span class="boring">use iceberg_catalog_rest::{REST_CATALOG_PROP_URI, RestCatalogBuilder};
</span><span class="boring">
</span><span class="boring">static REST_URI: &amp;str = &quot;http://localhost:8181&quot;;
</span><span class="boring">
</span><span class="boring">/// This is a simple example that demonstrates how to use [`RestCatalog`] to create namespaces.
</span><span class="boring">///
</span><span class="boring">/// The demo creates a namespace and prints it out.
</span><span class="boring">///
</span><span class="boring">/// A running instance of the iceberg-rest catalog on port 8181 is required. You can find how to run
</span><span class="boring">/// the iceberg-rest catalog with `docker compose` in the official
</span><span class="boring">/// [quickstart documentation](https://iceberg.apache.org/spark-quickstart/).
</span><span class="boring">#[tokio::main]
</span><span class="boring">async fn main() {
</span>    // Create the REST iceberg catalog.
    let catalog = RestCatalogBuilder::default()
        .load(
            &quot;rest&quot;,
            HashMap::from([(REST_CATALOG_PROP_URI.to_string(), REST_URI.to_string())]),
        )
        .await
        .unwrap();
<span class="boring">
</span><span class="boring">    // List all namespaces already in the catalog.
</span><span class="boring">    let existing_namespaces = catalog.list_namespaces(None).await.unwrap();
</span><span class="boring">    println!(&quot;Namespaces alreading in the existing catalog: {existing_namespaces:?}&quot;);
</span><span class="boring">
</span><span class="boring">    // Create a new namespace identifier.
</span><span class="boring">    let namespace_ident =
</span><span class="boring">        NamespaceIdent::from_vec(vec![&quot;ns1&quot;.to_string(), &quot;ns11&quot;.to_string()]).unwrap();
</span><span class="boring">
</span><span class="boring">    // Drop the namespace if it already exists.
</span><span class="boring">    if catalog.namespace_exists(&amp;namespace_ident).await.unwrap() {
</span><span class="boring">        println!(&quot;Namespace already exists, dropping now.&quot;,);
</span><span class="boring">        catalog.drop_namespace(&amp;namespace_ident).await.unwrap();
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    // Create the new namespace in the catalog.
</span><span class="boring">    let _created_namespace = catalog
</span><span class="boring">        .create_namespace(
</span><span class="boring">            &amp;namespace_ident,
</span><span class="boring">            HashMap::from([(&quot;key1&quot;.to_string(), &quot;value1&quot;.to_string())]),
</span><span class="boring">        )
</span><span class="boring">        .await
</span><span class="boring">        .unwrap();
</span><span class="boring">    println!(&quot;Namespace {namespace_ident:?} created!&quot;);
</span><span class="boring">
</span><span class="boring">    let loaded_namespace = catalog.get_namespace(&amp;namespace_ident).await.unwrap();
</span><span class="boring">    println!(&quot;Namespace loaded!\n\nNamespace: {loaded_namespace:#?}&quot;,);
</span><span class="boring">}</span></code></pre>
<p>You can run following code to list all root namespaces:</p>
<pre><code class="language-rust no_run noplayground"><span class="boring">// Licensed to the Apache Software Foundation (ASF) under one
</span><span class="boring">// or more contributor license agreements.  See the NOTICE file
</span><span class="boring">// distributed with this work for additional information
</span><span class="boring">// regarding copyright ownership.  The ASF licenses this file
</span><span class="boring">// to you under the Apache License, Version 2.0 (the
</span><span class="boring">// &quot;License&quot;); you may not use this file except in compliance
</span><span class="boring">// with the License.  You may obtain a copy of the License at
</span><span class="boring">//
</span><span class="boring">//   http://www.apache.org/licenses/LICENSE-2.0
</span><span class="boring">//
</span><span class="boring">// Unless required by applicable law or agreed to in writing,
</span><span class="boring">// software distributed under the License is distributed on an
</span><span class="boring">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
</span><span class="boring">// KIND, either express or implied.  See the License for the
</span><span class="boring">// specific language governing permissions and limitations
</span><span class="boring">// under the License.
</span><span class="boring">
</span><span class="boring">use std::collections::HashMap;
</span><span class="boring">
</span><span class="boring">use iceberg::{Catalog, CatalogBuilder, NamespaceIdent};
</span><span class="boring">use iceberg_catalog_rest::{REST_CATALOG_PROP_URI, RestCatalogBuilder};
</span><span class="boring">
</span><span class="boring">static REST_URI: &amp;str = &quot;http://localhost:8181&quot;;
</span><span class="boring">
</span><span class="boring">/// This is a simple example that demonstrates how to use [`RestCatalog`] to create namespaces.
</span><span class="boring">///
</span><span class="boring">/// The demo creates a namespace and prints it out.
</span><span class="boring">///
</span><span class="boring">/// A running instance of the iceberg-rest catalog on port 8181 is required. You can find how to run
</span><span class="boring">/// the iceberg-rest catalog with `docker compose` in the official
</span><span class="boring">/// [quickstart documentation](https://iceberg.apache.org/spark-quickstart/).
</span><span class="boring">#[tokio::main]
</span><span class="boring">async fn main() {
</span><span class="boring">    // Create the REST iceberg catalog.
</span><span class="boring">    let catalog = RestCatalogBuilder::default()
</span><span class="boring">        .load(
</span><span class="boring">            &quot;rest&quot;,
</span><span class="boring">            HashMap::from([(REST_CATALOG_PROP_URI.to_string(), REST_URI.to_string())]),
</span><span class="boring">        )
</span><span class="boring">        .await
</span><span class="boring">        .unwrap();
</span><span class="boring">
</span>    // List all namespaces already in the catalog.
    let existing_namespaces = catalog.list_namespaces(None).await.unwrap();
    println!(&quot;Namespaces alreading in the existing catalog: {existing_namespaces:?}&quot;);
<span class="boring">
</span><span class="boring">    // Create a new namespace identifier.
</span><span class="boring">    let namespace_ident =
</span><span class="boring">        NamespaceIdent::from_vec(vec![&quot;ns1&quot;.to_string(), &quot;ns11&quot;.to_string()]).unwrap();
</span><span class="boring">
</span><span class="boring">    // Drop the namespace if it already exists.
</span><span class="boring">    if catalog.namespace_exists(&amp;namespace_ident).await.unwrap() {
</span><span class="boring">        println!(&quot;Namespace already exists, dropping now.&quot;,);
</span><span class="boring">        catalog.drop_namespace(&amp;namespace_ident).await.unwrap();
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    // Create the new namespace in the catalog.
</span><span class="boring">    let _created_namespace = catalog
</span><span class="boring">        .create_namespace(
</span><span class="boring">            &amp;namespace_ident,
</span><span class="boring">            HashMap::from([(&quot;key1&quot;.to_string(), &quot;value1&quot;.to_string())]),
</span><span class="boring">        )
</span><span class="boring">        .await
</span><span class="boring">        .unwrap();
</span><span class="boring">    println!(&quot;Namespace {namespace_ident:?} created!&quot;);
</span><span class="boring">
</span><span class="boring">    let loaded_namespace = catalog.get_namespace(&amp;namespace_ident).await.unwrap();
</span><span class="boring">    println!(&quot;Namespace loaded!\n\nNamespace: {loaded_namespace:#?}&quot;,);
</span><span class="boring">}</span></code></pre>
<p>Then you can run following code to create namespace:</p>
<pre><code class="language-rust no_run noplayground"><span class="boring">// Licensed to the Apache Software Foundation (ASF) under one
</span><span class="boring">// or more contributor license agreements.  See the NOTICE file
</span><span class="boring">// distributed with this work for additional information
</span><span class="boring">// regarding copyright ownership.  The ASF licenses this file
</span><span class="boring">// to you under the Apache License, Version 2.0 (the
</span><span class="boring">// &quot;License&quot;); you may not use this file except in compliance
</span><span class="boring">// with the License.  You may obtain a copy of the License at
</span><span class="boring">//
</span><span class="boring">//   http://www.apache.org/licenses/LICENSE-2.0
</span><span class="boring">//
</span><span class="boring">// Unless required by applicable law or agreed to in writing,
</span><span class="boring">// software distributed under the License is distributed on an
</span><span class="boring">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
</span><span class="boring">// KIND, either express or implied.  See the License for the
</span><span class="boring">// specific language governing permissions and limitations
</span><span class="boring">// under the License.
</span><span class="boring">
</span><span class="boring">use std::collections::HashMap;
</span><span class="boring">
</span><span class="boring">use iceberg::{Catalog, CatalogBuilder, NamespaceIdent};
</span><span class="boring">use iceberg_catalog_rest::{REST_CATALOG_PROP_URI, RestCatalogBuilder};
</span><span class="boring">
</span><span class="boring">static REST_URI: &amp;str = &quot;http://localhost:8181&quot;;
</span><span class="boring">
</span><span class="boring">/// This is a simple example that demonstrates how to use [`RestCatalog`] to create namespaces.
</span><span class="boring">///
</span><span class="boring">/// The demo creates a namespace and prints it out.
</span><span class="boring">///
</span><span class="boring">/// A running instance of the iceberg-rest catalog on port 8181 is required. You can find how to run
</span><span class="boring">/// the iceberg-rest catalog with `docker compose` in the official
</span><span class="boring">/// [quickstart documentation](https://iceberg.apache.org/spark-quickstart/).
</span><span class="boring">#[tokio::main]
</span><span class="boring">async fn main() {
</span><span class="boring">    // Create the REST iceberg catalog.
</span><span class="boring">    let catalog = RestCatalogBuilder::default()
</span><span class="boring">        .load(
</span><span class="boring">            &quot;rest&quot;,
</span><span class="boring">            HashMap::from([(REST_CATALOG_PROP_URI.to_string(), REST_URI.to_string())]),
</span><span class="boring">        )
</span><span class="boring">        .await
</span><span class="boring">        .unwrap();
</span><span class="boring">
</span><span class="boring">    // List all namespaces already in the catalog.
</span><span class="boring">    let existing_namespaces = catalog.list_namespaces(None).await.unwrap();
</span><span class="boring">    println!(&quot;Namespaces alreading in the existing catalog: {existing_namespaces:?}&quot;);
</span><span class="boring">
</span>    // Create a new namespace identifier.
    let namespace_ident =
        NamespaceIdent::from_vec(vec![&quot;ns1&quot;.to_string(), &quot;ns11&quot;.to_string()]).unwrap();

    // Drop the namespace if it already exists.
    if catalog.namespace_exists(&amp;namespace_ident).await.unwrap() {
        println!(&quot;Namespace already exists, dropping now.&quot;,);
        catalog.drop_namespace(&amp;namespace_ident).await.unwrap();
    }

    // Create the new namespace in the catalog.
    let _created_namespace = catalog
        .create_namespace(
            &amp;namespace_ident,
            HashMap::from([(&quot;key1&quot;.to_string(), &quot;value1&quot;.to_string())]),
        )
        .await
        .unwrap();
    println!(&quot;Namespace {namespace_ident:?} created!&quot;);

    let loaded_namespace = catalog.get_namespace(&amp;namespace_ident).await.unwrap();
    println!(&quot;Namespace loaded!\n\nNamespace: {loaded_namespace:#?}&quot;,);
<span class="boring">}</span></code></pre>
<h1 id="table"><a class="header" href="#table">Table</a></h1>
<p>After creating <code>Catalog</code>, we can manipulate tables through <code>Catalog</code>.</p>
<p>You can use following code to create a table:</p>
<pre><code class="language-rust no_run noplayground"><span class="boring">// Licensed to the Apache Software Foundation (ASF) under one
</span><span class="boring">// or more contributor license agreements.  See the NOTICE file
</span><span class="boring">// distributed with this work for additional information
</span><span class="boring">// regarding copyright ownership.  The ASF licenses this file
</span><span class="boring">// to you under the Apache License, Version 2.0 (the
</span><span class="boring">// &quot;License&quot;); you may not use this file except in compliance
</span><span class="boring">// with the License.  You may obtain a copy of the License at
</span><span class="boring">//
</span><span class="boring">//   http://www.apache.org/licenses/LICENSE-2.0
</span><span class="boring">//
</span><span class="boring">// Unless required by applicable law or agreed to in writing,
</span><span class="boring">// software distributed under the License is distributed on an
</span><span class="boring">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
</span><span class="boring">// KIND, either express or implied.  See the License for the
</span><span class="boring">// specific language governing permissions and limitations
</span><span class="boring">// under the License.
</span><span class="boring">
</span><span class="boring">use std::collections::HashMap;
</span><span class="boring">
</span><span class="boring">use iceberg::spec::{NestedField, PrimitiveType, Schema, Type};
</span><span class="boring">use iceberg::{Catalog, CatalogBuilder, NamespaceIdent, TableCreation, TableIdent};
</span><span class="boring">use iceberg_catalog_rest::{REST_CATALOG_PROP_URI, RestCatalogBuilder};
</span><span class="boring">
</span><span class="boring">static REST_URI: &amp;str = &quot;http://localhost:8181&quot;;
</span><span class="boring">static NAMESPACE: &amp;str = &quot;default&quot;;
</span><span class="boring">static TABLE_NAME: &amp;str = &quot;t1&quot;;
</span><span class="boring">
</span><span class="boring">/// This is a simple example that demonstrates how to use [`RestCatalog`] to create tables.
</span><span class="boring">///
</span><span class="boring">/// The demo creates a table creates a table and then later retrieves the same table.
</span><span class="boring">///
</span><span class="boring">/// A running instance of the iceberg-rest catalog on port 8181 is required. You can find how to run
</span><span class="boring">/// the iceberg-rest catalog with `docker compose` in the official
</span><span class="boring">/// [quickstart documentation](https://iceberg.apache.org/spark-quickstart/).
</span><span class="boring">#[tokio::main]
</span><span class="boring">async fn main() {
</span><span class="boring">    // Create the REST iceberg catalog.
</span><span class="boring">    let catalog = RestCatalogBuilder::default()
</span><span class="boring">        .load(
</span><span class="boring">            &quot;rest&quot;,
</span><span class="boring">            HashMap::from([(REST_CATALOG_PROP_URI.to_string(), REST_URI.to_string())]),
</span><span class="boring">        )
</span><span class="boring">        .await
</span><span class="boring">        .unwrap();
</span><span class="boring">
</span>    // Create the table identifier.
    let namespace_ident = NamespaceIdent::from_vec(vec![NAMESPACE.to_string()]).unwrap();
    let table_ident = TableIdent::new(namespace_ident.clone(), TABLE_NAME.to_string());

    // You can also use the `from_strs` method on `TableIdent` to create the table identifier.
    // let table_ident = TableIdent::from_strs([NAMESPACE, TABLE_NAME]).unwrap();

    // Drop the table if it already exists.
    if catalog.table_exists(&amp;table_ident).await.unwrap() {
        println!(&quot;Table {TABLE_NAME} already exists, dropping now.&quot;);
        catalog.drop_table(&amp;table_ident).await.unwrap();
    }

    // Build the table schema.
    let table_schema = Schema::builder()
        .with_fields(vec![
            NestedField::optional(1, &quot;foo&quot;, Type::Primitive(PrimitiveType::String)).into(),
            NestedField::required(2, &quot;bar&quot;, Type::Primitive(PrimitiveType::Int)).into(),
            NestedField::optional(3, &quot;baz&quot;, Type::Primitive(PrimitiveType::Boolean)).into(),
        ])
        .with_schema_id(1)
        .with_identifier_field_ids(vec![2])
        .build()
        .unwrap();

    // Build the table creation parameters.
    let table_creation = TableCreation::builder()
        .name(table_ident.name.clone())
        .schema(table_schema.clone())
        .properties(HashMap::from([(&quot;owner&quot;.to_string(), &quot;testx&quot;.to_string())]))
        .build();

    // Create the table.
    let _created_table = catalog
        .create_table(&amp;table_ident.namespace, table_creation)
        .await
        .unwrap();
    println!(&quot;Table {TABLE_NAME} created!&quot;);
<span class="boring">
</span><span class="boring">    // Ensure that the table is under the correct namespace.
</span><span class="boring">    assert!(
</span><span class="boring">        catalog
</span><span class="boring">            .list_tables(&amp;namespace_ident)
</span><span class="boring">            .await
</span><span class="boring">            .unwrap()
</span><span class="boring">            .contains(&amp;table_ident)
</span><span class="boring">    );
</span><span class="boring">
</span><span class="boring">    // Load the table back from the catalog. It should be identical to the created table.
</span><span class="boring">    let loaded_table = catalog.load_table(&amp;table_ident).await.unwrap();
</span><span class="boring">    println!(&quot;Table {TABLE_NAME} loaded!\n\nTable: {loaded_table:?}&quot;);
</span><span class="boring">}</span></code></pre>
<p>Also, you can load a table directly:</p>
<pre><code class="language-rust no_run noplayground"><span class="boring">// Licensed to the Apache Software Foundation (ASF) under one
</span><span class="boring">// or more contributor license agreements.  See the NOTICE file
</span><span class="boring">// distributed with this work for additional information
</span><span class="boring">// regarding copyright ownership.  The ASF licenses this file
</span><span class="boring">// to you under the Apache License, Version 2.0 (the
</span><span class="boring">// &quot;License&quot;); you may not use this file except in compliance
</span><span class="boring">// with the License.  You may obtain a copy of the License at
</span><span class="boring">//
</span><span class="boring">//   http://www.apache.org/licenses/LICENSE-2.0
</span><span class="boring">//
</span><span class="boring">// Unless required by applicable law or agreed to in writing,
</span><span class="boring">// software distributed under the License is distributed on an
</span><span class="boring">// &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
</span><span class="boring">// KIND, either express or implied.  See the License for the
</span><span class="boring">// specific language governing permissions and limitations
</span><span class="boring">// under the License.
</span><span class="boring">
</span><span class="boring">use std::collections::HashMap;
</span><span class="boring">
</span><span class="boring">use iceberg::spec::{NestedField, PrimitiveType, Schema, Type};
</span><span class="boring">use iceberg::{Catalog, CatalogBuilder, NamespaceIdent, TableCreation, TableIdent};
</span><span class="boring">use iceberg_catalog_rest::{REST_CATALOG_PROP_URI, RestCatalogBuilder};
</span><span class="boring">
</span><span class="boring">static REST_URI: &amp;str = &quot;http://localhost:8181&quot;;
</span><span class="boring">static NAMESPACE: &amp;str = &quot;default&quot;;
</span><span class="boring">static TABLE_NAME: &amp;str = &quot;t1&quot;;
</span><span class="boring">
</span><span class="boring">/// This is a simple example that demonstrates how to use [`RestCatalog`] to create tables.
</span><span class="boring">///
</span><span class="boring">/// The demo creates a table creates a table and then later retrieves the same table.
</span><span class="boring">///
</span><span class="boring">/// A running instance of the iceberg-rest catalog on port 8181 is required. You can find how to run
</span><span class="boring">/// the iceberg-rest catalog with `docker compose` in the official
</span><span class="boring">/// [quickstart documentation](https://iceberg.apache.org/spark-quickstart/).
</span><span class="boring">#[tokio::main]
</span><span class="boring">async fn main() {
</span><span class="boring">    // Create the REST iceberg catalog.
</span><span class="boring">    let catalog = RestCatalogBuilder::default()
</span><span class="boring">        .load(
</span><span class="boring">            &quot;rest&quot;,
</span><span class="boring">            HashMap::from([(REST_CATALOG_PROP_URI.to_string(), REST_URI.to_string())]),
</span><span class="boring">        )
</span><span class="boring">        .await
</span><span class="boring">        .unwrap();
</span><span class="boring">
</span><span class="boring">    // Create the table identifier.
</span><span class="boring">    let namespace_ident = NamespaceIdent::from_vec(vec![NAMESPACE.to_string()]).unwrap();
</span><span class="boring">    let table_ident = TableIdent::new(namespace_ident.clone(), TABLE_NAME.to_string());
</span><span class="boring">
</span><span class="boring">    // You can also use the `from_strs` method on `TableIdent` to create the table identifier.
</span><span class="boring">    // let table_ident = TableIdent::from_strs([NAMESPACE, TABLE_NAME]).unwrap();
</span><span class="boring">
</span><span class="boring">    // Drop the table if it already exists.
</span><span class="boring">    if catalog.table_exists(&amp;table_ident).await.unwrap() {
</span><span class="boring">        println!(&quot;Table {TABLE_NAME} already exists, dropping now.&quot;);
</span><span class="boring">        catalog.drop_table(&amp;table_ident).await.unwrap();
</span><span class="boring">    }
</span><span class="boring">
</span><span class="boring">    // Build the table schema.
</span><span class="boring">    let table_schema = Schema::builder()
</span><span class="boring">        .with_fields(vec![
</span><span class="boring">            NestedField::optional(1, &quot;foo&quot;, Type::Primitive(PrimitiveType::String)).into(),
</span><span class="boring">            NestedField::required(2, &quot;bar&quot;, Type::Primitive(PrimitiveType::Int)).into(),
</span><span class="boring">            NestedField::optional(3, &quot;baz&quot;, Type::Primitive(PrimitiveType::Boolean)).into(),
</span><span class="boring">        ])
</span><span class="boring">        .with_schema_id(1)
</span><span class="boring">        .with_identifier_field_ids(vec![2])
</span><span class="boring">        .build()
</span><span class="boring">        .unwrap();
</span><span class="boring">
</span><span class="boring">    // Build the table creation parameters.
</span><span class="boring">    let table_creation = TableCreation::builder()
</span><span class="boring">        .name(table_ident.name.clone())
</span><span class="boring">        .schema(table_schema.clone())
</span><span class="boring">        .properties(HashMap::from([(&quot;owner&quot;.to_string(), &quot;testx&quot;.to_string())]))
</span><span class="boring">        .build();
</span><span class="boring">
</span><span class="boring">    // Create the table.
</span><span class="boring">    let _created_table = catalog
</span><span class="boring">        .create_table(&amp;table_ident.namespace, table_creation)
</span><span class="boring">        .await
</span><span class="boring">        .unwrap();
</span><span class="boring">    println!(&quot;Table {TABLE_NAME} created!&quot;);
</span><span class="boring">
</span>    // Ensure that the table is under the correct namespace.
    assert!(
        catalog
            .list_tables(&amp;namespace_ident)
            .await
            .unwrap()
            .contains(&amp;table_ident)
    );

    // Load the table back from the catalog. It should be identical to the created table.
    let loaded_table = catalog.load_table(&amp;table_ident).await.unwrap();
    println!(&quot;Table {TABLE_NAME} loaded!\n\nTable: {loaded_table:?}&quot;);
<span class="boring">}</span></code></pre>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="contributing"><a class="header" href="#contributing">Contributing</a></h1>
<p>First, thank you for contributing to Iceberg Rust! The goal of this document is to provide everything you need to start contributing to iceberg-rust. The following TOC is sorted progressively, starting with the basics and expanding into more specifics.</p>
<h2 id="your-first-contribution"><a class="header" href="#your-first-contribution">Your First Contribution</a></h2>
<ol>
<li><a href="https://github.com/apache/iceberg-rust/fork">Fork the iceberg-rust repository</a> into your own GitHub account.</li>
<li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-and-deleting-branches-within-your-repository">Create a new Git branch</a>.</li>
<li>Make your changes.</li>
<li><a href="https://help.github.com/en/github/collaborating-with-issues-and-pull-requests/creating-a-pull-request-from-a-fork">Submit the branch as a pull request</a> to the main iceberg-rust repo. An iceberg-rust team member should comment and/or review your pull request within a few days. Although, depending on the circumstances, it may take longer.</li>
</ol>
<h2 id="workflow"><a class="header" href="#workflow">Workflow</a></h2>
<h3 id="git-branches"><a class="header" href="#git-branches">Git Branches</a></h3>
<p><em>All</em> changes must be made in a branch and submitted as <a href="CONTRIBUTING.html#github-pull-requests">pull requests</a>. iceberg-rust does not adopt any type of branch naming style, but please use something descriptive of your changes.</p>
<h3 id="github-pull-requests"><a class="header" href="#github-pull-requests">GitHub Pull Requests</a></h3>
<p>Once your changes are ready you must submit your branch as a <a href="https://github.com/apache/iceberg-rust/pulls">pull request</a>.</p>
<h4 id="title"><a class="header" href="#title">Title</a></h4>
<p>The pull request title must follow the format outlined in the <a href="https://www.conventionalcommits.org">conventional commits spec</a>. <a href="https://www.conventionalcommits.org">Conventional commits</a> is a standardized format for commit messages. iceberg-rust only requires this format for commits on the <code>main</code> branch. And because iceberg-rust squashes commits before merging branches, this means that only the pull request title must conform to this format.</p>
<p>The following are all good examples of pull request titles:</p>
<pre><code class="language-text">feat(schema): Add last_updated_ms in schema
docs: add hdfs classpath related troubleshoot
ci: Mark job as skipped if owner is not apache
fix(schema): Ignore prefix if it's empty
refactor: Polish the implementation of read parquet
</code></pre>
<h4 id="reviews--approvals"><a class="header" href="#reviews--approvals">Reviews &amp; Approvals</a></h4>
<p>All pull requests should be reviewed by at least one iceberg-rust committer.</p>
<h4 id="merge-style"><a class="header" href="#merge-style">Merge Style</a></h4>
<p>All pull requests are squash merged. We generally discourage large pull requests that are over 300-500 lines of diff. If you would like to propose a change that is larger we suggest coming onto <a href="mailto:dev@iceberg.apache.org">Iceberg's DEV mailing list</a> or <a href="https://join.slack.com/t/apache-iceberg/shared_invite/zt-1zbov3k6e-KtJfoaxp97YfX6dPz1Bk7A">Slack #rust Channel</a> and discuss it with us. This way we can talk through the solution and discuss if a change that large is even needed! This will produce a quicker response to the change and likely produce code that aligns better with our process.</p>
<p>When a pull request is under review, please avoid using force push as it makes it difficult for reviewer to track changes. If you need to keep the branch up to date with the main branch, consider using <code>git merge</code> instead. </p>
<h3 id="ci"><a class="header" href="#ci">CI</a></h3>
<p>Currently, iceberg-rust uses GitHub Actions to run tests. The workflows are defined in <code>.github/workflows</code>.</p>
<h2 id="setup"><a class="header" href="#setup">Setup</a></h2>
<p>For small or first-time contributions, we recommend the dev container method. Prefer to do it yourself? That's fine too!</p>
<h3 id="using-a-dev-container-environment"><a class="header" href="#using-a-dev-container-environment">Using a dev container environment</a></h3>
<p>iceberg-rust provides a pre-configured <a href="https://containers.dev/">dev container</a> that could be used in <a href="https://github.com/features/codespaces">Github Codespaces</a>, <a href="https://code.visualstudio.com/">VSCode</a>, <a href="https://www.jetbrains.com/remote-development/gateway/">JetBrains</a>, <a href="https://jupyterlab.readthedocs.io/en/stable/">JupyterLab</a>. Please pick up your favourite runtime environment.</p>
<p>The fastest way is:</p>
<p><a href="https://codespaces.new/apache/iceberg-rust?quickstart=1&amp;machine=standardLinux32gb"><img src="https://github.com/codespaces/badge.svg" alt="Open in GitHub Codespaces" /></a></p>
<h3 id="bring-your-own-toolbox"><a class="header" href="#bring-your-own-toolbox">Bring your own toolbox</a></h3>
<h4 id="install-rust"><a class="header" href="#install-rust">Install rust</a></h4>
<p>iceberg-rust is primarily a Rust project. To build iceberg-rust, you will need to set up Rust development first. We highly recommend using <a href="https://rustup.rs/">rustup</a> for the setup process.</p>
<p>For Linux or MacOS, use the following command:</p>
<pre><code class="language-shell">curl --proto '=https' --tlsv1.2 -sSf https://sh.rustup.rs | sh
</code></pre>
<p>For Windows, download <code>rustup-init.exe</code> from <a href="https://win.rustup.rs/x86_64">here</a> instead.</p>
<p>Rustup will read iceberg-rust's <code>rust-toolchain.toml</code> and set up everything else automatically. To ensure that everything works correctly, run <code>cargo version</code> under iceberg-rust's root directory:</p>
<pre><code class="language-shell">$ cargo version
cargo 1.69.0 (6e9a83356 2023-04-12)
</code></pre>
<h4 id="install-docker-or-podman"><a class="header" href="#install-docker-or-podman">Install Docker or Podman</a></h4>
<p>Currently, iceberg-rust uses Docker to set up environment for integration tests. Native Docker has some limitations, please check (https://github.com/apache/iceberg-rust/pull/748). Please use Orbstack or Podman.</p>
<p>For MacOS users, you can install <a href="website/src/reference/orbstack.html">OrbStack as a docker alternative</a>.
For Podman users, refer to <a href="website/src/reference/podman.html">Using Podman instead of Docker</a></p>
<h2 id="build"><a class="header" href="#build">Build</a></h2>
<ul>
<li>To compile the project: <code>make build</code></li>
<li>To check code styles: <code>make check</code></li>
<li>To run unit tests only: <code>make unit-test</code></li>
<li>To run all tests: <code>make test</code></li>
</ul>
<h2 id="dependencies"><a class="header" href="#dependencies">Dependencies</a></h2>
<p><code>Cargo.lock</code> is committed, and regularly updated by dependabot to make sure the latest dependency versions are
tested in CI and developers have reproducible builds.</p>
<p>In <code>Cargo.toml</code>, we specify the minimum version required to use iceberg-rust. This allows users to choose their
dependency versions without always upgrading to the latest.</p>
<h2 id="code-of-conduct"><a class="header" href="#code-of-conduct">Code of Conduct</a></h2>
<p>We expect all community members to follow our <a href="https://www.apache.org/foundation/policies/conduct.html">Code of Conduct</a>.</p>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<p>This document mainly introduces how the release manager releases a new version in accordance with the Apache requirements.</p>
<h2 id="introduction"><a class="header" href="#introduction">Introduction</a></h2>
<p><code>Source Release</code> is the key point which Apache values, and is also necessary for an ASF release.</p>
<p>Please remember that publishing software has legal consequences.</p>
<p>This guide complements the foundation-wide policies and guides:</p>
<ul>
<li><a href="https://www.apache.org/legal/release-policy.html">Release Policy</a></li>
<li><a href="https://infra.apache.org/release-distribution">Release Distribution Policy</a></li>
<li><a href="https://infra.apache.org/release-publishing.html">Release Creation Process</a></li>
</ul>
<h2 id="some-terminology-of-release"><a class="header" href="#some-terminology-of-release">Some Terminology of release</a></h2>
<p>In the context of our release, we use several terms to describe different stages of the release process.</p>
<p>Here's an explanation of these terms:</p>
<ul>
<li><code>iceberg_version</code>: the version of Iceberg to be released, like <code>0.2.0</code>.</li>
<li><code>rc_version</code>: the minor version for voting round, like <code>rc.1</code>.</li>
<li><code>release_version</code>: the version of release candidate, like <code>0.2.0-rc.1</code>.</li>
</ul>
<h2 id="preparation"><a class="header" href="#preparation">Preparation</a></h2>
<div class="warning">
<p>This section is the requirements for individuals who are new to the role of release manager.</p>
</div>
<p>Refer to <a href="reference/setup_gpg.html">Setup GPG Key</a> to make sure the GPG key has been set up.</p>
<h2 id="start-a-tracking-issue-about-the-next-release"><a class="header" href="#start-a-tracking-issue-about-the-next-release">Start a tracking issue about the next release</a></h2>
<p>Start a tracking issue on GitHub for the upcoming release to track all tasks that need to be completed.</p>
<p>Title:</p>
<pre><code>Tracking issues of Iceberg Rust ${iceberg_version} Release
</code></pre>
<p>Content:</p>
<pre><code class="language-markdown">This issue is used to track tasks of the iceberg rust ${iceberg_version} release.

## Tasks

### Blockers

&gt; Blockers are the tasks that must be completed before the release.

### Build Release

#### GitHub Side

- [ ] Bump version in project
- [ ] Update docs
- [ ] Generate dependencies list
- [ ] Push release candidate tag to GitHub

#### ASF Side

- [ ] Create an ASF Release
- [ ] Upload artifacts to the SVN dist repo

### Voting

- [ ] Start VOTE at iceberg community

### Official Release

- [ ] Push the release git tag
- [ ] Publish artifacts to SVN RELEASE branch
- [ ] Change Iceberg Rust Website download link
- [ ] Send the announcement

For details of each step, please refer to: https://rust.iceberg.apache.org/release
</code></pre>
<h2 id="github-side"><a class="header" href="#github-side">GitHub Side</a></h2>
<h3 id="bump-version-in-project"><a class="header" href="#bump-version-in-project">Bump version in project</a></h3>
<p>Bump all components' version in the project to the new iceberg version.
Please note that this version is the exact version of the release, not the release candidate version.</p>
<ul>
<li>rust core: bump version in <code>Cargo.toml</code></li>
</ul>
<h3 id="update-docs"><a class="header" href="#update-docs">Update docs</a></h3>
<ul>
<li>Update <code>CHANGELOG.md</code> by Drafting a new release <a href="https://github.com/apache/iceberg-rust/releases/new">note on Github Releases</a></li>
</ul>
<h3 id="generate-dependencies-list"><a class="header" href="#generate-dependencies-list">Generate dependencies list</a></h3>
<p>Download and setup <code>cargo-deny</code>. You can refer to <a href="https://embarkstudios.github.io/cargo-deny/cli/index.html">cargo-deny</a>.</p>
<p>Run <code>python3 ./scripts/dependencies.py generate</code> to update the dependencies list of every package.</p>
<p>Run <code>python3 ./scripts/dependencies.py check</code> to verify the updated dependencies' license.</p>
<h3 id="push-release-candidate-tag"><a class="header" href="#push-release-candidate-tag">Push release candidate tag</a></h3>
<p>After bump version PR gets merged, we can create a GitHub release for the release candidate:</p>
<ul>
<li>Create a tag at <code>main</code> branch on the <code>Bump Version</code> / <code>Patch up version</code> commit: <code>git tag -s &quot;v${release_version}&quot;</code>, please correctly check out the corresponding commit instead of directly tagging on the main branch.</li>
<li>Push tags to GitHub: <code>git push origin &quot;v${release_version}&quot;</code>.</li>
</ul>
<h2 id="asf-side"><a class="header" href="#asf-side">ASF Side</a></h2>
<p>If any step in the ASF Release process fails and requires code changes,
we will abandon that version and prepare for the next one.
Our release page will only display ASF releases instead of GitHub Releases.</p>
<h3 id="create-an-asf-release"><a class="header" href="#create-an-asf-release">Create an ASF Release</a></h3>
<p>After GitHub Release has been created, we can start to create ASF Release.</p>
<ul>
<li>Checkout to released tag. (e.g. <code>git checkout v0.2.0-rc.1</code>, tag is created in the previous step)</li>
<li>Use the release script to create a new release: <code>ICEBERG_VERSION=&lt;iceberg_version&gt; ICEBERG_VERSION_RC=&lt;rc_version&gt; ./scripts/release.sh</code>(e.g. <code>ICEBERG_VERSION=0.2.0 ICEBERG_VERSION_RC=rc.1 ./scripts/release.sh</code>)
<ul>
<li>This script will do the following things:
<ul>
<li>Create a new branch named by <code>release-${release_version}</code> from the tag</li>
<li>Generate the release candidate artifacts under <code>dist</code>, including:
<ul>
<li><code>apache-iceberg-rust-${release_version}.tar.gz</code></li>
<li><code>apache-iceberg-rust-${release_version}.tar.gz.asc</code></li>
<li><code>apache-iceberg-rust-${release_version}.tar.gz.sha512</code></li>
</ul>
</li>
<li>Check the header of the source code. This step needs docker to run.</li>
</ul>
</li>
</ul>
</li>
</ul>
<p>This script will create a new release under <code>dist</code>.</p>
<p>For example:</p>
<pre><code class="language-shell">&gt; tree dist
dist
â”œâ”€â”€ apache-iceberg-rust-0.2.0.tar.gz
â”œâ”€â”€ apache-iceberg-rust-0.2.0.tar.gz.asc
â””â”€â”€ apache-iceberg-rust-0.2.0.tar.gz.sha512
</code></pre>
<h3 id="upload-artifacts-to-the-svn-dist-repo"><a class="header" href="#upload-artifacts-to-the-svn-dist-repo">Upload artifacts to the SVN dist repo</a></h3>
<p>SVN is required for this step.</p>
<p>The svn repository of the dev branch is: <a href="https://dist.apache.org/repos/dist/dev/iceberg/">https://dist.apache.org/repos/dist/dev/iceberg/</a></p>
<p>First, checkout Iceberg to local directory:</p>
<pre><code class="language-shell"># As this step will copy all the versions, it will take some time. If the network is broken, please use svn cleanup to delete the lock before re-execute it.
svn co https://dist.apache.org/repos/dist/dev/iceberg/ /tmp/iceberg-dist-dev
</code></pre>
<p>Then, upload the artifacts:</p>
<blockquote>
<p>The <code>${release_version}</code> here should be like <code>0.2.0-rc.1</code></p>
</blockquote>
<pre><code class="language-shell"># create a directory named by version
mkdir /tmp/iceberg-dist-dev/apache-iceberg-rust-${release_version}/

# copy source code and signature package to the versioned directory
cp ./dist/* /tmp/iceberg-dist-dev/apache-iceberg-rust-${release_version}/

# change dir to the svn folder
cd /tmp/iceberg-dist-dev/

# check svn status
svn status

# add to svn
svn add apache-iceberg-rust-${release_version}

# commit to SVN remote server
svn commit -m &quot;Prepare for iceberg-rust ${release_version}&quot;
</code></pre>
<p>Visit <a href="https://dist.apache.org/repos/dist/dev/iceberg/">https://dist.apache.org/repos/dist/dev/iceberg/</a> to make sure the artifacts are uploaded correctly.</p>
<h3 id="rescue"><a class="header" href="#rescue">Rescue</a></h3>
<p>If you accidentally published wrong or unexpected artifacts, like wrong signature files, wrong sha256 files,
please cancel the release for the current <code>release_version</code>,
<em>increase th RC counting</em> and re-initiate a release with the new <code>release_version</code>.
And remember to delete the wrong artifacts from the SVN dist repo.</p>
<h2 id="voting"><a class="header" href="#voting">Voting</a></h2>
<p>Iceberg Community Vote should send email to: <a href="mailto:dev@iceberg.apache.org">dev@iceberg.apache.org</a>:</p>
<p>Title:</p>
<pre><code>[VOTE] Release Apache Iceberg Rust ${iceberg_version} ${rc_version}
</code></pre>
<p>Content:</p>
<pre><code>Hello, Apache Iceberg Rust Community,

This is a call for a vote to release Apache Iceberg rust version ${iceberg_version}.

The tag to be voted on is v${release_version}.

The release candidate:

https://dist.apache.org/repos/dist/dev/iceberg/apache-iceberg-rust-${release_version}/

Keys to verify the release candidate:

https://downloads.apache.org/iceberg/KEYS

Git tag for the release:

https://github.com/apache/iceberg-rust/releases/tag/v${release_version}

Please download, verify, and test.

The VOTE will be open for at least 72 hours and until the necessary
number of votes are reached.

[ ] +1 approve
[ ] +0 no opinion
[ ] -1 disapprove with the reason

To learn more about Apache Iceberg, please see https://rust.iceberg.apache.org/

Checklist for reference:

[ ] Download links are valid.
[ ] Checksums and signatures.
[ ] LICENSE/NOTICE files exist
[ ] No unexpected binary files
[ ] All source files have ASF headers
[ ] Can compile from source

More details please refer to https://rust.iceberg.apache.org/release.html#how-to-verify-a-release.

Thanks

${name}
</code></pre>
<p>Example: <a href="https://lists.apache.org/thread/c211gqq2yl15jbxqk4rcnq1bdqltjm5l">https://lists.apache.org/thread/c211gqq2yl15jbxqk4rcnq1bdqltjm5l</a></p>
<p>After at least 3 <code>+1</code> binding vote (from Iceberg PMC member), claim the vote result:</p>
<p>Title:</p>
<pre><code>[RESULT][VOTE] Release Apache Iceberg Rust ${iceberg_version} ${rc_version}
</code></pre>
<p>Content:</p>
<pre><code>Hello, Apache Iceberg Rust Community,

The vote to release Apache Iceberg Rust ${release_version} has passed.

The vote PASSED with 3 +1 binding and 1 +1 non-binding votes, no +0 or -1 votes:

Binding votes:

- xxx
- yyy
- zzz

Non-Binding votes:

- aaa

Vote thread: ${vote_thread_url}

Thanks

${name}
</code></pre>
<p>Example: <a href="https://lists.apache.org/thread/xk5myl10mztcfotn59oo59s4ckvojds6">https://lists.apache.org/thread/xk5myl10mztcfotn59oo59s4ckvojds6</a></p>
<h2 id="how-to-verify-a-release"><a class="header" href="#how-to-verify-a-release">How to verify a release</a></h2>
<h3 id="validating-a-source-release"><a class="header" href="#validating-a-source-release">Validating a source release</a></h3>
<p>A release contains links to following things:</p>
<ul>
<li>A source tarball</li>
<li>A signature(.asc)</li>
<li>A checksum(.sha512)</li>
</ul>
<p>After downloading them, here are the instructions on how to verify them.</p>
<ul>
<li>
<p>Import keys:</p>
<pre><code class="language-bash">curl https://downloads.apache.org/iceberg/KEYS -o KEYS
gpg --import KEYS
</code></pre>
</li>
<li>
<p>Verify the <code>.asc</code> file:</p>
<pre><code class="language-bash">gpg --verify apache-iceberg-rust-*.tar.gz.asc
</code></pre>
<p>Expects: <code>gpg: Good signature from ...</code></p>
</li>
<li>
<p>Verify the checksums: </p>
<pre><code class="language-bash">shasum -a 512 -c apache-iceberg-rust-*.tar.gz.sha512
</code></pre>
<p>Expects: <code>&quot;apache-iceberg-rust-...tar.gz: OK&quot;</code></p>
</li>
<li>
<p>Verify build and test:</p>
<pre><code class="language-bash">tar -xzf apache-iceberg-rust-*.tar.gz
cd apache-iceberg-rust-*/
make build &amp;&amp; make test
</code></pre>
</li>
<li>
<p>Verify license headers: </p>
<pre><code class="language-bash">docker run -it --rm -v $(pwd):/github/workspace apache/skywalking-eyes header check
</code></pre>
<p>Expects: <code>INFO Totally checked _ files, valid: _, invalid: 0, ignored: _, fixed: 0 </code></p>
</li>
</ul>
<h2 id="official-release"><a class="header" href="#official-release">Official Release</a></h2>
<h3 id="push-the-release-git-tag"><a class="header" href="#push-the-release-git-tag">Push the release git tag</a></h3>
<pre><code class="language-shell"># Checkout the tags that passed VOTE
git checkout &quot;v${release_version}&quot;
# Tag with the iceberg version
git tag -s &quot;v${iceberg_version}&quot;
# Push tags to github to trigger releases
git push origin &quot;v${iceberg_version}&quot;
</code></pre>
<h3 id="publish-artifacts-to-svn-release-branch"><a class="header" href="#publish-artifacts-to-svn-release-branch">Publish artifacts to SVN RELEASE branch</a></h3>
<pre><code class="language-shell">svn mv https://dist.apache.org/repos/dist/dev/iceberg/apache-iceberg-rust-${release_version} https://dist.apache.org/repos/dist/release/iceberg/apache-iceberg-rust-${iceberg_version} -m &quot;Release Apache Iceberg Rust ${iceberg_version}&quot;
</code></pre>
<h3 id="change-iceberg-rust-website-download-link"><a class="header" href="#change-iceberg-rust-website-download-link">Change Iceberg Rust Website download link</a></h3>
<p>Update the download link in <code>website/src/download.md</code> to the new release version.</p>
<h3 id="create-a-github-release"><a class="header" href="#create-a-github-release">Create a GitHub Release</a></h3>
<ul>
<li>Click <a href="https://github.com/apache/iceberg-rust/releases/new">here</a> to create a new release.</li>
<li>Pick the git tag of this release version from the dropdown menu.</li>
<li>Make sure the branch target is <code>main</code>.</li>
<li>Generate the release note by clicking the <code>Generate release notes</code> button.</li>
<li>Add the release note from every component's <code>upgrade.md</code> if there are breaking changes before the content generated by GitHub. Check them carefully.</li>
<li>Publish the release.</li>
</ul>
<h3 id="send-the-announcement"><a class="header" href="#send-the-announcement">Send the announcement</a></h3>
<p>Send the release announcement to <code>dev@iceberg.apache.org</code> and CC <code>announce@apache.org</code>.</p>
<p>Instead of adding breaking changes, let's include the new features as &quot;notable changes&quot; in the announcement.</p>
<p>Title:</p>
<pre><code>[ANNOUNCE] Release Apache Iceberg Rust ${iceberg_version}
</code></pre>
<p>Content:</p>
<pre><code>Hi all,

The Apache Iceberg Rust community is pleased to announce
that Apache Iceberg Rust ${iceberg_version} has been released!

Iceberg is a data access layer that allows users to easily and efficiently
retrieve data from various storage services in a unified way.

The notable changes since ${iceberg_version} include:
1. xxxxx
2. yyyyyy
3. zzzzzz

Please refer to the change log for the complete list of changes:
https://github.com/apache/iceberg-rust/releases/tag/v${iceberg_version}

Apache Iceberg Rust website: https://rust.iceberg.apache.org/

Download Links: https://rust.iceberg.apache.org/download

From official ASF distribution: https://dist.apache.org/repos/dist/release/iceberg/apache-iceberg-rust-${release_version}/

Iceberg Resources:
- Issue: https://github.com/apache/iceberg-rust/issues
- Mailing list: dev@iceberg.apache.org

Thanks
On behalf of Apache Iceberg Community
</code></pre>
<p>Example: <a href="https://lists.apache.org/thread/oy77n55brvk72tnlb2bjzfs9nz3cfd0s">https://lists.apache.org/thread/oy77n55brvk72tnlb2bjzfs9nz3cfd0s</a></p>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="using-podman-instead-of-docker"><a class="header" href="#using-podman-instead-of-docker">Using Podman instead of Docker</a></h1>
<p>Iceberg-rust does not require containerization, except for integration tests, where &quot;docker&quot; and &quot;docker-compose&quot; are used to start containers for minio and various catalogs. Below instructions setup &quot;rootful podman&quot; and docker's official docker-compose plugin to run integration tests as an alternative to docker or Orbstack.</p>
<ol>
<li>Have podman v4 or newer.
<pre><code class="language-shell">$ podman --version
podman version 4.9.4-rhel
</code></pre>
</li>
<li>Create a docker wrapper script:</li>
</ol>
<ul>
<li>
<p>Create a fresh <code>/usr/bin/docker</code> file and add the below contents:</p>
<pre><code class="language-bash">#!/bin/sh
[ -e /etc/containers/nodocker ] || \
echo &quot;Emulate Docker CLI using podman. Create /etc/containers/nodocker to quiet msg.&quot; &gt;&amp;2
exec sudo /usr/bin/podman &quot;$@&quot;
</code></pre>
</li>
<li>
<p>Set new <code>/usr/bin/docker</code> file to executable.</p>
<pre><code class="language-shell">sudo chmod +x /usr/bin/docker
</code></pre>
</li>
</ul>
<ol start="3">
<li>
<p>Install the <a href="https://docs.docker.com/compose/install/linux">docker compose plugin</a>. Check for successful installation.</p>
<pre><code class="language-shell">$ docker compose version
Docker Compose version v2.28.1
</code></pre>
</li>
<li>
<p>Append the below to <code>~/.bashrc</code> or equivalent shell config:</p>
<pre><code class="language-bash">export DOCKER_HOST=unix:///run/podman/podman.sock
</code></pre>
</li>
<li>
<p>Start the &quot;rootful&quot; podman socket.</p>
<pre><code class="language-shell">sudo systemctl start podman.socket
sudo systemctl status podman.socket
</code></pre>
</li>
<li>
<p>Check that the following symlink exists.</p>
<pre><code class="language-shell">$ ls -al /var/run/docker.sock
lrwxrwxrwx 1 root root 27 Jul 24 12:18 /var/run/docker.sock -&gt; /var/run/podman/podman.sock
</code></pre>
<p>If the symlink does not exist, create it.</p>
<pre><code class="language-shell">sudo ln -s /var/run/podman/podman.sock /var/run/docker.sock
</code></pre>
</li>
<li>
<p>Check that the docker socket is working.</p>
<pre><code class="language-shell">sudo curl -H &quot;Content-Type: application/json&quot; --unix-socket /var/run/docker.sock http://localhost/_ping
</code></pre>
</li>
<li>
<p>Try some integration tests!</p>
<pre><code class="language-shell">cargo test -p iceberg --test file_io_s3_test
</code></pre>
</li>
</ol>
<h1 id="references"><a class="header" href="#references">References</a></h1>
<ul>
<li><a href="https://docs.docker.com/compose/install/linux">https://docs.docker.com/compose/install/linux</a></li>
<li><a href="https://www.redhat.com/sysadmin/podman-docker-compose">https://www.redhat.com/sysadmin/podman-docker-compose</a></li>
</ul>
<h1 id="note-on-rootless-containers"><a class="header" href="#note-on-rootless-containers">Note on rootless containers</a></h1>
<p>As of podman v4, <a href="https://www.redhat.com/sysadmin/container-ip-address-podman">&quot;To be succinct and simple, when running rootless containers, the container itself does not have an IP address&quot;</a> This causes issues with iceberg-rust's integration tests, which rely upon ip-addressable containers via docker-compose. As a result, podman &quot;rootful&quot; containers are required throughout to ensure containers have IP addresses. Perhaps as a future work or with updates to default podman networking, the need for &quot;rootful&quot; podman containers can be eliminated.</p>
<ul>
<li><a href="https://www.redhat.com/sysadmin/container-ip-address-podman">https://www.redhat.com/sysadmin/container-ip-address-podman</a></li>
<li><a href="https://github.com/containers/podman/blob/main/docs/tutorials/basic_networking.md">https://github.com/containers/podman/blob/main/docs/tutorials/basic_networking.md</a></li>
</ul>
<h1 id="debugging-note"><a class="header" href="#debugging-note">Debugging Note:</a></h1>
<ul>
<li>Fix for error: <code>Error: short-name &quot;apache/iceberg-rest-fixture&quot; did not resolve to an alias and no unqualified-search registries are defined in &quot;/etc/containers/registries.conf&quot;</code>
<ul>
<li>Add or modify the <code>/etc/containers/registries.conf</code> file:</li>
</ul>
<pre><code class="language-toml">[[registry]]
prefix = &quot;docker.io&quot;
location = &quot;docker.io&quot;
</code></pre>
</li>
</ul>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="orbstack-as-a-docker-alternative-on-macos"><a class="header" href="#orbstack-as-a-docker-alternative-on-macos">OrbStack as a docker alternative on macOS</a></h1>
<ol>
<li>
<p>Install OrbStack by downloading <a href="https://orbstack.dev/download">installer</a> or using Homebrew.</p>
<pre><code class="language-shell">brew install orbstack
</code></pre>
</li>
<li>
<p>Migrate Docker data</p>
<pre><code class="language-shell">orb migrate docker
</code></pre>
</li>
<li>
<p>(Optional) Add registry mirrors</p>
<p>You can edit the config directly at <code>~/.orbstack/config/docker.json</code> and restart the engine with <code>orb restart docker</code>.</p>
<pre><code>{
    &quot;registry-mirrors&quot;: [&quot;&lt;mirror_addr&gt;&quot;]
}
</code></pre>
</li>
</ol>
<div style="break-before: page; page-break-before: always;"></div><!--
  ~ Licensed to the Apache Software Foundation (ASF) under one
  ~ or more contributor license agreements.  See the NOTICE file
  ~ distributed with this work for additional information
  ~ regarding copyright ownership.  The ASF licenses this file
  ~ to you under the Apache License, Version 2.0 (the
  ~ "License"); you may not use this file except in compliance
  ~ with the License.  You may obtain a copy of the License at
  ~
  ~   http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing,
  ~ software distributed under the License is distributed on an
  ~ "AS IS" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY
  ~ KIND, either express or implied.  See the License for the
  ~ specific language governing permissions and limitations
  ~ under the License.
-->
<h1 id="setup-gpg-key"><a class="header" href="#setup-gpg-key">Setup GPG key</a></h1>
<blockquote>
<p>This section is a brief from the <a href="https://infra.apache.org/openpgp.html">Cryptography with OpenPGP</a> guideline.</p>
</blockquote>
<h2 id="install-gpg"><a class="header" href="#install-gpg">Install GPG</a></h2>
<p>For more details, please refer to <a href="https://www.gnupg.org/download/index.html">GPG official website</a>. Here shows one approach to install GPG with <code>apt</code>:</p>
<pre><code class="language-shell">sudo apt install gnupg2
</code></pre>
<h2 id="generate-gpg-key"><a class="header" href="#generate-gpg-key">Generate GPG Key</a></h2>
<p>Attentions:</p>
<ul>
<li>Name is best to keep consistent with your full name of Apache ID;</li>
<li>Email should be the Apache email;</li>
<li>Name is best to only use English to avoid garbled.</li>
</ul>
<p>Run <code>gpg --full-gen-key</code> and complete the generation interactively:</p>
<pre><code class="language-shell">gpg (GnuPG) 2.2.20; Copyright (C) 2020 Free Software Foundation, Inc.
This is free software: you are free to change and redistribute it.
There is NO WARRANTY, to the extent permitted by law.

Please select what kind of key you want:
   (1) RSA and RSA (default)
   (2) DSA and Elgamal
   (3) DSA (sign only)
   (4) RSA (sign only)
  (14) Existing key from card
Your selection? 1 # input 1
RSA keys may be between 1024 and 4096 bits long.
What keysize do you want? (2048) 4096 # input 4096
Requested keysize is 4096 bits
Please specify how long the key should be valid.
         0 = key does not expire
      &lt;n&gt;  = key expires in n days
      &lt;n&gt;w = key expires in n weeks
      &lt;n&gt;m = key expires in n months
      &lt;n&gt;y = key expires in n years
Key is valid for? (0) 0 # input 0
Key does not expire at all
Is this correct? (y/N) y # input y

GnuPG needs to construct a user ID to identify your key.

Real name: Hulk Lin               # input your name
Email address: hulk@apache.org    # input your email
Comment:                          # input some annotations, optional
You selected this USER-ID:
    &quot;Hulk &lt;hulk@apache.org&gt;&quot;

Change (N)ame, (C)omment, (E)mail or (O)kay/(Q)uit? O # input O
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.
We need to generate a lot of random bytes. It is a good idea to perform
some other action (type on the keyboard, move the mouse, utilize the
disks) during the prime generation; this gives the random number
generator a better chance to gain enough entropy.

# Input the security key
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Please enter this passphrase                         â”‚
â”‚                                                      â”‚
â”‚ Passphrase: _______________________________          â”‚
â”‚                                                      â”‚
â”‚       &lt;OK&gt;                              &lt;Cancel&gt;     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
# key generation will be done after your inputting the key with the following output
gpg: key E49B00F626B marked as ultimately trusted
gpg: revocation certificate stored as '/Users/hulk/.gnupg/openpgp-revocs.d/F77B887A4F25A9468C513E9AA3008E49B00F626B.rev'
public and secret key created and signed.

pub   rsa4096 2022-07-12 [SC]
      F77B887A4F25A9468C513E9AA3008E49B00F626B
uid           [ultimate] hulk &lt;hulk@apache.org&gt;
sub   rsa4096 2022-07-12 [E]
</code></pre>
<h2 id="upload-your-key-to-public-gpg-keyserver"><a class="header" href="#upload-your-key-to-public-gpg-keyserver">Upload your key to public GPG keyserver</a></h2>
<p>Firstly, list your key:</p>
<pre><code class="language-shell">gpg --list-keys
</code></pre>
<p>The output is like:</p>
<pre><code class="language-shell">-------------------------------
pub   rsa4096 2022-07-12 [SC]
      F77B887A4F25A9468C513E9AA3008E49B00F626B
uid           [ultimate] hulk &lt;hulk@apache.org&gt;
sub   rsa4096 2022-07-12 [E]
</code></pre>
<p>Then, send your key id to key server:</p>
<pre><code class="language-shell">gpg --keyserver keys.openpgp.org --send-key &lt;key-id&gt; # e.g., F77B887A4F25A9468C513E9AA3008E49B00F626B
</code></pre>
<p>Among them, <code>keys.openpgp.org</code> is a randomly selected keyserver, you can use <code>keyserver.ubuntu.com</code> or any other full-featured keyserver.</p>
<h2 id="check-whether-the-key-is-created-successfully"><a class="header" href="#check-whether-the-key-is-created-successfully">Check whether the key is created successfully</a></h2>
<p>Uploading takes about one minute; after that, you can check by your email at the corresponding keyserver.</p>
<p>Uploading keys to the keyserver is mainly for joining a <a href="https://infra.apache.org/release-signing.html#web-of-trust">Web of Trust</a>.</p>
<h2 id="add-your-gpg-public-key-to-the-keys-document"><a class="header" href="#add-your-gpg-public-key-to-the-keys-document">Add your GPG public key to the KEYS document</a></h2>
<p>:::info</p>
<p><code>SVN</code> is required for this step.</p>
<p>:::</p>
<p>The svn repository of the release branch is: https://dist.apache.org/repos/dist/release/iceberg</p>
<p>Please always add the public key to KEYS in the release branch:</p>
<pre><code class="language-shell">svn co https://dist.apache.org/repos/dist/release/iceberg iceberg-dist
# As this step will copy all the versions, it will take some time. If the network is broken, please use svn cleanup to delete the lock before re-execute it.
cd iceberg-dist
(gpg --list-sigs YOUR_NAME@apache.org &amp;&amp; gpg --export --armor YOUR_NAME@apache.org) &gt;&gt; KEYS # Append your key to the KEYS file
svn add .   # It is not needed if the KEYS document exists before.
svn ci -m &quot;add gpg key for YOUR_NAME&quot; # Later on, if you are asked to enter a username and password, just use your apache username and password.
</code></pre>
<h2 id="upload-the-gpg-public-key-to-your-github-account"><a class="header" href="#upload-the-gpg-public-key-to-your-github-account">Upload the GPG public key to your GitHub account</a></h2>
<ul>
<li>Enter https://github.com/settings/keys to add your GPG key.</li>
<li>Please remember to bind the email address used in the GPG key to your GitHub account (https://github.com/settings/emails) if you find &quot;unverified&quot; after adding it.</li>
</ul>

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->


                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">

            </nav>

        </div>




        <script>
            window.playground_copyable = true;
        </script>


        <script src="elasticlunr.min.js"></script>
        <script src="mark.min.js"></script>
        <script src="searcher.js"></script>

        <script src="clipboard.min.js"></script>
        <script src="highlight.js"></script>
        <script src="book.js"></script>

        <!-- Custom JS scripts -->

        <script>
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>

    </div>
    </body>
</html>
